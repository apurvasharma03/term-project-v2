<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Mogul</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
            background-color: #f4f4f4;
        }
        h1 {
            color: #333;
        }
        .button-container {
            margin-top: 20px;
        }
        .button {
            margin: 10px;
            padding: 15px 30px;
            font-size: 16px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        .button:hover:enabled {
            background-color: #0056b3;
        }
        #result {
            margin-top: 20px;
            font-size: 16px;
            color: #333;
        }
        .spinner {
            border: 4px solid #f4f4f4;
            border-top: 4px solid #007bff;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>
<body>
    <h1>Music Mogul</h1>
    <p>Explore the world of music with insightful analysis:</p>
    <div class="button-container">
        <button class="button" onclick="handleCollaborations()">Tell me about collaborations</button>
        <button class="button" onclick="handleTopGenres()">Tell me about the top genres</button>
        <button class="button" onclick="handleTopArtists()">Tell me about the top artists</button>
        <button class="button" onclick="handleCrossGenreArtists()">Tell me about cross-genre artists</button>
        <button class="button" onclick="handleSongQuantity()">Tell me about song quantity</button>
        <button class="button" onclick="handleArtistsCareers()">Tell me about longest artists' careers</button>
    </div>
    <div id="result"></div>

    <script>
        async function handleCollaborations() {
            const genre = prompt("Enter the genre (e.g., Pop):");
            if (!genre) {
                alert("Please enter a valid genre!");
                return;
            }
        
            const resultDiv = document.getElementById("result");
            resultDiv.textContent = "Loading...";
        
            try {
                const response = await fetch(`http://localhost:8080/api/collaborations?genre=${encodeURIComponent(genre)}`);
                const data = await response.json();
                resultDiv.textContent = data.message;
            } catch (error) {
                console.error("Error fetching collaborations:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            }
        }
        

        async function handleTopGenres() {
            const decade = prompt("Enter the decade (e.g., 1980):");
            if (!decade || isNaN(decade)) {
                alert("Please enter a valid decade!");
                return;
            }
        
            const resultDiv = document.getElementById("result");
            resultDiv.textContent = "Loading...";
        
            try {
                const response = await fetch(`http://localhost:8080/api/top-genres?decade=${decade}`);
                const data = await response.json();
                resultDiv.textContent = data.message;
            } catch (error) {
                console.error("Error fetching top genres:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            }
        }
        

        async function handleTopArtists() {
            const decade = prompt("Enter the decade (e.g., 1980):");
            if (!decade || isNaN(decade)) {
                alert("Please enter a valid decade!");
                return;
            }
        
            const resultDiv = document.getElementById("result");
            resultDiv.textContent = "Loading...";
        
            try {
                const response = await fetch(`http://localhost:8080/api/top-artists?decade=${decade}`);
                const data = await response.json();
                resultDiv.textContent = data.message;
            } catch (error) {
                console.error("Error fetching top artists:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            }
        }
        

        async function handleCrossGenreArtists() {
            const decade = prompt("Enter the decade (e.g., 1980):").trim();
            if (!/^\d{4}$/.test(decade)) {
                alert("Please enter a valid 4-digit year.");
                return;
            }
            fetchAndDisplay(`cross-genre?decade=${decade}`, `Cross-Genre Artists for ${decade}`);
        }

        async function handleLongestCareers() {
            fetchAndDisplay("longest-careers", "Longest Artists' Careers");
        }

        async function handleSongQuantity() {
            const decade = prompt("Enter the decade (e.g., 1980):");
            if (!decade || isNaN(decade)) {
                alert("Please enter a valid decade!");
                return;
            }
        
            const resultDiv = document.getElementById("result");
            resultDiv.textContent = "Loading...";
        
            try {
                const response = await fetch(`http://localhost:8080/api/song-quantity?decade=${decade}`);
                const data = await response.json();
                resultDiv.textContent = data.message;
            } catch (error) {
                console.error("Error fetching song quantity:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            }
        }
        

        async function fetchAndDisplay(endpoint, title) {
            const resultDiv = document.getElementById("result");
            const buttons = document.querySelectorAll(".button");

            // Temporarily disable all buttons
            buttons.forEach(btn => btn.disabled = true);

            resultDiv.innerHTML = `<div class="spinner">Loading...</div>`;
            try {
                const response = await fetch(`http://localhost:8080/api/${endpoint}`);
                const data = await response.json();

                // Display the result
                resultDiv.innerHTML = `
                    <h3>${title}</h3>
                    <pre>${JSON.stringify(data, null, 2)}</pre>
                `;
            } catch (error) {
                console.error("Error fetching data:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            } finally {
                // Re-enable all buttons
                buttons.forEach(btn => btn.disabled = false);
            }
        }
        async function handleArtistsCareers() {
            const genre = prompt("Enter the genre (e.g., Pop):");
            if (!genre) {
                alert("Please enter a valid genre!");
                return;
            }
        
            const resultDiv = document.getElementById("result");
            resultDiv.textContent = "Loading...";
        
            try {
                const response = await fetch(`http://localhost:8080/api/artists-careers?genre=${encodeURIComponent(genre)}`);
                const data = await response.json();
                resultDiv.textContent = data.message;
            } catch (error) {
                console.error("Error fetching artists' careers:", error);
                resultDiv.textContent = "An error occurred. Please try again.";
            }
        }
        
    </script>
</body>
</html>
